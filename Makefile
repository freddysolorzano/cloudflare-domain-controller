# Variables\nBINARY=cloudflare-domain-controller\nPLATFORMS=darwin linux windows\nARCHITECTURES=amd64 arm64\n\n# Version information\nVERSION ?= dev\nCOMMIT ?= $(shell git rev-parse --short HEAD 2>/dev/null || echo \"unknown\")\nDATE ?= $(shell date -u +%Y-%m-%d.%H:%M:%S)\n\n# LDFLAGS for version embedding\nLDFLAGS=-ldflags \"-X main.version=$(VERSION) -X main.commit=$(COMMIT) -X main.date=$(DATE)\"\n\n# Build for current platform\nbuild:\n\tgo build $(LDFLAGS) -o $(BINARY) .\n\n# Install dependencies\ndeps:\n\tgo mod tidy\n\n# Cross compile for different platforms\ncross-compile: deps\n\t@for OS in $(PLATFORMS); do \\\n\t\tfor ARCH in $(ARCHITECTURES); do \\\n\t\t\techo \"Building for $$OS/$$ARCH\"; \\\n\t\t\texport GOOS=$$OS; \\\n\t\t\texport GOARCH=$$ARCH; \\\n\t\t\tgo build $(LDFLAGS) -o dist/$(BINARY)-$$OS-$$ARCH .; \\\n\t\t\tdone; \\\n\tdone\n\n# Install the binary to GOPATH/bin\ninstall: build\n\tcp $(BINARY) $(GOPATH)/bin/\n\n# Clean build artifacts\nclean:\n\trm -f $(BINARY)\n\trm -rf dist/\n\n# Run tests\ntest:\n\tgo test ./...\n\n# Help message\nhelp:\n\t@echo \"Available targets:\"\n\t@echo \"  build:       Build for current platform\"\n\t@echo \"  deps:        Install dependencies\"\n\t@echo \"  cross-compile: Cross compile for different platforms\"\n\t@echo \"  install:     Install the binary to GOPATH/bin\"\n\t@echo \"  clean:       Clean build artifacts\"\n\t@echo \"  test:        Run tests\"\n\t@echo \"  help:        Show this help message\"\n\n.PHONY: build deps cross-compile install clean test help